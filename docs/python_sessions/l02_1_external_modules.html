<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>Integrative Structural Biology - Python intro</title>

    <meta name="description" content="Slides for the Integrative Structural Biology course">
    <meta name="author" content="Wouter Boomsma">
    
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="../reveal.js-4.3.1/dist/reveal.css">
    <link rel="stylesheet" href="../reveal.js-4.3.1/dist/theme/white-helv.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="../reveal.js-4.3.1/plugin/highlight/googlecode.css">

    <!-- If the query includes 'print-pdf', use the PDF print sheet -->
    <script>
      if( window.location.search.match( /print-pdf/gi ) ) {
      	var link = document.createElement( 'link' );
      	link.rel = 'stylesheet';
      	link.type = 'text/css';
      	link.href = '../reveal.js-4.3.1/css/print/pdf.css';
      	document.getElementsByTagName( 'head' )[0].appendChild( link );
      }
    </script>

    <style>
      .reveal .slides {
        text-align: left;
      }
      .reveal a {
        color:DarkSlateBlue;
      }
      .reveal dt {
        margin-top:0.5em;
      }
      .reveal section img {
        border: 1px solid lightgrey;
        box-shadow: none;
      }      
      .reveal a img {
        border: 1px solid lightgrey;
        box-shadow: none;
      }      
      .reveal img.noborder {
        border: none;
        box-shadow: none;
      }      
      .reveal pre {
        width: 97.5%;
      }      
      .reveal code .label {
        background:#E8E8E8;
        color:grey;
        padding:4px;
        height:1em;
        position:absolute;
        right:0px;
        top:0px;
      }
      .reveal .twocols50 {
        width:47%;
        float:left;
        margin:1.5%;
      }
      .reveal .twocols30 {
        width:27%;
        float:left;
        margin:1.5%;
      }
      .reveal .twocols70 {
        width:67%;
        float:left;
        margin:1.5%;
      }
      .reveal .twocols20 {
        width:17%;
        float:left;
        margin:1.5%;
      }
      .reveal .twocols80 {
        width:77%;
        float:left;
        margin:1.5%;
      }
      .reveal .twocols40 {
        width:37%;
        float:left;
        margin:1.5%;
      }
      .reveal .twocols60 {
        width:57%;
        float:left;
        margin:1.5%;
      }
      .reveal section div.container{
          display: flex;
      }
      .reveal section div.container div{
          flex: 1;
      }
      .reveal dt.spaced {
          margin-top:0.5em;
      }

    </style>
  </head>
  
  <body>
    
    <div class="reveal">
      
      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">


        <section>
          <br/>
          <h1>Integrative Structural Biology</h1>
          <h4>Module 2B - Python Programming </h4>
          <div style="text-align:left; font-size:100%; border:1px solid lightgrey; background-color: #fafafa; padding:0.5em; display:inline-block; margin-top:0em; padding-top:0em;padding-right:3em;">
            <h4 style="margin-bottom: 0.2em; margin-top:0.5em">External modules:</h4>
            <ul>
              <li>Modules and how to import them</li>
              <li>Pandas</li>
              <li>Matplotlib</li>
            </ul>
          </div>
        </section>

        <section style="text-align:center">
          <h2>Modules</h2>
        </section>

        <section>
          <h3>Modules</h3>

          <p>Another level of structural building block</p>
          <p>Like functions are a collection of statements, modules are a
            collection of functions, statements and classes</p>
          <p class="fragment"><span style="font-weight:bold;">Every <code>.py</code> file is a module</span>. The name of the module is the name of the file without the <code>.py</code> extention.</p>

        </section>

        <section>
          <h3>Modules - importing</h3>

          <p>
            Modules define a bunch of names of variables, functions etc (called a namespace)
          </p>

          <p class="fragment">
            By importing a module, you gain access to this namespace
          </p>

          <p class="fragment">
            Importing can be done in two ways: <span style="font-family:monospace;">import</span> or <span style="font-family:monospace;">from</span>
          </p>

        </section>

        <section style="font-size:90%">
          <div>
            <h3><code style="text-transform:none">import</code></h3>

            <pre><code class="python" data-trim data-noescape>import <i>module_name</i></code></pre>

            <p>imports the module as a single object in your namespace</p>

            <pre><code class="python" data-trim>import random
random.randint(1,6)    # all names are accessed through "random"
4</code></pre>
          </div>

          <div class="fragment">
            <h3><code style="text-transform:none">from</code> ... <code style="text-transform:none">import</code></h3>

            <pre><code class="python" data-trim data-noescape>from <i>module_name</i> import <i>names</i></code></pre>

            import particular names from the module into your current namespace

            <pre><code class="python" data-trim>from random import randint
randint(1,6)   # the randint name has been imported into the namespace
            </code></pre>
          </div>
        </section>


        <section>
          <h3><code style="text-transform:none;">from</code> ... <code style="text-transform:none;">import *</code></h3>

          <pre><code class="python" data-trim data-noescape>from <i>module_name</i> import <i>*</i></code></pre>

          <p>This will import all available names into your current namespace.</p>

          <pre><code class="python" data-trim>from random import *
randint(1,6)
          </code></pre>

        </section>

        <section>
          <h3><code style="text-transform:none;">import</code> vs <code style="text-transform:none;">from</code></h3>

          <!-- <p>Which should you use?</p> -->

          <p style="padding-top:0.5em">
            Which should you use?
          <ul>
            <li class="fragment"><code style="text-transform:none;">from</code> makes the important objects more easily available</li>
            <li class="fragment"><code style="text-transform:none;">import</code> keeps the namespaces neatly separated</li>
          </ul>
          </p>

          <p class="fragment">By using <code style="font-family:monospace;text-transform:none;">from</code>, you risk name-clashes. Especially when using <code style="text-transform:none;">from</code>...<code style="text-transform:none;">import *</code>.</p>

          <p class="fragment">Therefore, <code style="text-transform:none;">from</code>...<code style="text-transform:none;">import *</code> is OK for testing purposes, but for real programs it is better to specify which names you want to import using <code style="text-transform:none;">from</code>, or keep them in their own object using <code style="text-transform:none;">import</code>.</p>

        </section>

        <section>
          <h3>as</h3>

          <p>Both the <code style="text-transform:none;">import</code> and <code style="text-transform:none;">from</code> import techniques support the <code style="text-transform:none;">as</code> keyword</p>

          <p>This allows you to import a module under a different name</p>

          <pre><code class="python" data-trim>import random as rnd
rnd.randint(1,6)
          </code></pre>

        </section>

        <section style="font-size:90%">
          <h3>Packages</h3>

          <p>Larger libraries are sometimes organized as a "package", which is basically just directory of module files.</p>

          <span class="fragment">
            <p>Importing a package:</p>

            <pre><code class="python" data-trim>import Bio.PDB.PDBParser
            </code></pre>

            <p>This means that somewhere on the python path, there is a directory called <code>Bio</code>, under which there is a directory called <code>PDB</code>, which containes various Python modules, one of which is called <code>PDBParser.py</code>. <span class="fragment" >Note how <code>.</code> is used as directory separator.</span></p>


          </span>


<!--          <p class="fragment"><b>For this course, you will not be required to write python packages yourself. But you should be able to import them.</b></p>-->

        </section>

        <section style="font-size:90%">
          <h3>Importing modules - Exercise</h3>

          <p>In the previous slides, we saw how to import a function. We can do the same for variables defined within a module. For instance, the <code>math</code> module has a variable called <code>pi</code>.</p>

          <p>Try to get access to this variable in two ways: </p>
          <ul>
            <li>Import it such that it becomes available as <code>math.pi</code>.</li>
            <li>Import it such that it becomes available directly as <code>pi</code>.</li>
          </ul>
        </section>

        <section class="solution">
          <h3>Importing modules - Exercise - solution</h3>

          <ul>
            <li>Import it such that it becomes available as <code>math.pi</code>.</li>
            <pre class="fragment"><code class="python" data-trim data-noescape>import math
print(math.pi)
              </code></pre>
            <li>Import it such that it becomes available as <code>pi</code>.</li>
            <pre class="fragment"><code class="python" data-trim data-noescape>from math import pi
print(pi)
              </code></pre>
            <span  class="fragment">
            or
            <pre><code class="python" data-trim data-noescape>from math import *
print(pi)
              </code></pre>
            </span>
          </ul>
        </section>

<!--        <section class="solution">-->
<!--          <h3>Importing modules - Exercise - solution (2)</h3>-->
<!--          <ul>-->
<!--            <li>Import the randint function from the random module in two different ways-->
<!--              that don't overwrite your existing function. Check whether your original <code>randint</code> function still works. </li>-->

<!--            <pre class="fragment" style=""><code class="python" data-trim data-noescape>... <div class="label">module_import_test1.py</div>-->
<!--# 1. Importing through random module object-->
<!--import random-->
<!--print(random.randint(1,6))-->

<!--# 2. Using "as" to avoid name conflict-->
<!--from random import randint as rnd_randint-->
<!--print(rnd_randint(1,6))-->

<!--randint()   # Does our own function still work?-->
<!--            </code></pre>-->
<!--            <pre class="fragment" style=""><code class="bash" data-trim data-noescape><div class="label">output</div>4-->
<!--5-->
<!--hello-->
<!--              </code></pre>-->
<!--          </ul>-->
<!--        </section>-->

<!--        <section class="solution">-->
<!--          <h3>Importing modules - Exercise - solution (3) </h3>-->

<!--          <ul>-->
<!--            <li>Import everything from the random module-->
<!--              using <code style="text-transform:none;">from ... import-->
<!--                *</code> and check whether your-->
<!--              original <code>randint</code> function still works.</li>-->

<!--            <pre class="fragment"><code class="python" data-trim data-noescape>... <div class="label">module_import_test2.py</div>-->
<!--# Importing everything from random into our namespace-->
<!--from random import *-->

<!--# Attempting to call our own randint function-->
<!--randint()-->
<!--            </code></pre>-->
<!--            <pre class="fragment" ><code class="bash" data-trim data-noescape><div class="label">output</div>Traceback (most recent call last):-->
<!--  File "/home/lpp/module_import_test2.py", line 7, in <module>-->
<!--    randint()-->
<!--TypeError: randint() takes exactly 3 arguments (1 given)</code></pre>-->

<!--            <p class="fragment">Our function has been overwritten.</p>-->
<!--          </ul>-->
<!--        </section>-->

<!--        <section>-->
<!--          <h3>Importing - Where does python look for modules? </h3>-->

<!--          <p>Whenever you write an import statement, Python will look through a list of directories to find it</p>-->

<!--          <span class="fragment">-->
<!--          <p>You can inspect (and change) this list through the <code>sys</code> module</p>-->

<!--            <pre class="fragment" style="max-width:none; width:100%"><code class="python" data-trim data-noescape>... <div class="label">python_path_test.py</div>-->
<!--import sys         # Importing sys module-->
<!--print(sys.path)-->
<!--            </code></pre>-->
<!--            <pre class="fragment" style="max-width:none; width:100%"><code class="bash" data-trim data-noescape><div class="label">output</div>-->
<!--['/home/lpp', '/home/lpp', '/usr/lib/python2.7', '/usr/lib/python2.7/plat-i386-linux-gnu', '/usr/lib/python2.7/lib-tk', '/usr/lib/python2.7/lib-old', '/usr/lib/python2.7/lib-dynload', '/usr/local/lib/python2.7/dist-packages', '/usr/lib/python2.7/dist-packages', '/usr/lib/python2.7/dist-packages/PILcompat', '/usr/lib/python2.7/dist-packages/gtk-2.0', '/usr/lib/pymodules/python2.7', '/usr/lib/python2.7/dist-packages/ubuntu-sso-client']-->
<!--            </code></pre>-->
<!--          </span>-->

<!--          &lt;!&ndash;          <span class="fragment">&ndash;&gt;-->
<!--          &lt;!&ndash;            <p>Alternatively, you can set it from Bash by setting the <code>PYTHONPATH</code> environment variable (e.g. in your .bashrc)</p>&ndash;&gt;-->
<!--          &lt;!&ndash;          </span>&ndash;&gt;-->
<!--        </section>-->


<!--        <section style="font-size:85%">-->
<!--          <h3>Modules - Exercise</h3>-->

<!--          <ol>-->
<!--            <li>Create a file called <code>coin_toss_module.py</code>, containing our old <code>coin_toss</code> function:-->
<!--              <pre style="max-width:none;width:97.5%;font-size:40%"><code class="python" data-trim data-noescape>import random-->

<!--def coin_toss(heads_prob=0.5):-->
<!--    '''Return "heads" or "tails" with a specified  probability'''-->
<!--    x = random.random()-->
<!--    if x &lt; heads_prob:-->
<!--        return "heads"-->
<!--    else:-->
<!--        return "tails"-->
<!--              </code></pre>-->
<!--            </li>-->
<!--            <li>Create a new Python file called <code>coin_toss_test.py</code></li>-->
<!--            <li>Call the <code>coin_toss</code> function from within the <code>coin_toss_test.py</code> file.</li>-->
<!--            <li>Create a directory called <code>my_modules</code> in your current directory, and move the <code>coin_toss_module.py</code> file to this new directory. Verify that your import in <code>coin_toss_test.py</code> no longer works. Now fix it by adding the <code>my_modules</code> directory to the <code>sys.path.</code></li>-->
<!--          </ol>-->

<!--        </section>-->

<!--        <section style="font-size:90%" class="solution">-->
<!--          <h3>Modules - Exercise - solution</h3>-->

<!--          <pre><code class="python" data-trim  data-noescape><div class="label">coin_toss_module.py</div>import random-->

<!--def coin_toss(heads_prob=0.5):  # define function with optional argument-->
<!--    x = random.random()-->
<!--    if x < heads_prob:          # determine whether it is heads or tails-->
<!--        return "heads"-->
<!--    else:-->
<!--        return "tails"-->
<!--           </code></pre>-->

<!--          <pre><code class="python" data-trim data-noescape><div class="label">coin_toss_test.py</div>import coin_toss_module-->
<!--result = coin_toss_module.coin_toss()-->
<!--print(result)-->
<!--          </code></pre>-->

<!--          <pre><code class="bash" data-trim data-noescape><div class="label">output</div>'heads'-->
<!--          </code></pre>-->
<!--        </section>-->

<!--        <section style="font-size:85%" class="solution">-->
<!--          <h3>Modules - Exercise - solution (2)</h3>-->

<!--          Move the module to the <code>my_modules</code> directory:-->
<!--          <pre><code class="python" data-trim  data-noescape><div class="label">my_modules/coin_toss_module.py</div>import random-->

<!--def coin_toss(heads_prob=0.5):  # define function with optional argument-->
<!--    x = random.random()-->
<!--    if x < heads_prob:          # determine whether it is heads or tails-->
<!--        return "heads"-->
<!--    else:-->
<!--        return "tails"-->
<!--           </code></pre>-->

<!--          Now: this doesn't work:-->

<!--          <pre><code class="python" data-trim data-noescape><div class="label">coin_toss_test.py</div>import coin_toss_module-->
<!--result = coin_toss_module.coin_toss()-->
<!--print(result)-->
<!--          </code></pre>-->

<!--          <pre><code class="bash" data-trim data-noescape><div class="label">output</div>Traceback (most recent call last):-->
<!--  File "/Users/wb/teaching/ppds2020/code/playground/coin_toss_test.py", line 3, in &lt;module&gt;-->
<!--    import coin_toss_module-->
<!--ModuleNotFoundError: No module named 'coin_toss_module'-->
<!--          </code></pre>-->
<!--        </section>-->

<!--        <section style="font-size:85%" class="solution">-->
<!--          <h3>Modules - Exercise - solution (2)</h3>-->

<!--          <p>Fixing it by adding my_modules to the path</p>-->

<!--          <pre><code class="python" data-trim data-noescape><div class="label">coin_toss_test.py</div>import sys-->
<!--sys.path.append('my_modules')-->
<!--import coin_toss_module       # This now works-->
<!--result = coin_toss_module.coin_toss()-->
<!--print(result)-->
<!--          </code></pre>-->

<!--          <pre><code class="bash" data-trim data-noescape><div class="label">output</div>heads</code></pre>-->

<!--        </section>-->


        <section style="font-size:80%">
          <h2>Installing external modules</h2>

          <p>On Google colab and the ERDA notebook environment, many external modules are preinstalled. But if you need to install additional modules, you can do so using <code>pip</code></p>

          pip is a package management system used to install and manage external modules written in Python: <!-- . Many packages can be found in the Python Package Index (PyPI). -->

          <div class="fragment">

            <div style="margin-top:0.5em">Basic use from within notebook:</div>
            <pre><code class="bash" data-trim data-noescape>!pip install <em>package-name</em></code></pre>

          </div>

          <div class="fragment">
            Example:
            <pre><code class="bash" data-trim data-noescape>!pip install seaborn</code></pre>
          </div>

          <div class="fragment">
          On ERDAs servers, pip is not installed by default, so you need to do this first:

          <pre><code class="bash" data-trim data-noescape>!conda install --yes pip</code></pre>
          </div>

        </section>

        <section style="text-align:center">
          <h2>Numpy</h2>
        </section>

        <section style="font-size:90%">
          <h2><code>numpy</code></h2>

          <p>Basic ideas:</p>

          <ul>
            <li class="fragment">Make it easy to perform operations on a collection of numbers.</li>
            <li class="fragment">Make it easy to work with tables (matrices) of numbers</li>
            <li class="fragment">Much faster than writing loops in Python</li>
          </ul>

          <p class="fragment">In short: whenever you have a list of numbers, consider using numpy.</p>

        </section>

        <section>
          <h3>numpy - importing</h3>

          <pre><code class="python" data-trim>import numpy</code></pre>

          <div class="fragment"><p>or (very commonly used):</p>
            <pre><code class="python" data-trim>import numpy as np</code></pre>
          </div>

        </section>

        <section>
          <h3>numpy - array</h3>

          <p>The main ingredient in numpy is a new type: the numpy array.</p>

          <p>Creating an array from a list or tuple:</p>
          <pre><code class="python" data-trim>a = np.array([1,2,3,4])
a = np.array((1,2,3,4))</code></pre>

          <div class="fragment">
            <p>In contrast to lists, numpy arrays are primarily designed to contain elements of the same type.</p>

            <p>You can specify a type explicitly:</p>
            <pre><code class="python" data-trim>a = np.array([1,2,3,4], np.float)   # np.int, np.bool, ...</code></pre>
            <p>If not specified, numpy will take a guess.</p>
          </div>
        </section>

        <section>
          <h3>numpy - array initialization</h3>

          <p>There are various other ways to initialize numpy arrays</p>

          <span class="fragment">
            <div>Range of numbers:</div>
            <span class="twocols50"><pre><code class="python" data-trim>print(np.arange(2.0, 2.4, 0.1))</code></pre></span>
            <span class="twocols50"><pre><code class="python" data-trim data-noescape><div class="label">output</div>[ 2. ,  2.1,  2.2,  2.3]</code></pre></span>

            <!--           <pre><code class="python" data-trim>&gt;&gt;&gt; np.arange(2.0, 2.5, 0.1)      # Note similarity to range() function  -->
            <!-- array([ 2. ,  2.1,  2.2,  2.3,  2.4])</code></pre> -->
          </span>

          <span class="fragment">
            <div>Zeros</div>
            <span class="twocols50"><pre><code class="python" data-trim>print(np.zeros(4))</code></pre></span>
            <span class="twocols50"><pre><code class="python" data-trim data-noescape><div class="label">output</div>[ 0.  0.  0.  0.]</code></pre></span>
          </span>

          <span class="fragment">
            <div>Ones:</div>
            <span class="twocols50"><pre><code class="python" data-trim>print(np.ones(4))</code></pre></span>
            <span class="twocols50"><pre><code class="python" data-trim data-noescape><div class="label">output</div>[ 1.  1.  1.  1.]</code></pre></span>
            <!--   <pre><code class="python" data-trim>&gt;&gt;&gt; np.ones(5) -->
            <!-- array([ 1.,  1.,  1.,  1.,  1.])</code></pre> -->
          </span>
        </section>

        <section>
          <h3>numpy - operations on arrays</h3>

          <p>The common mathematical operators are available</p>

          <span class="twocols40"><pre><code class="python" data-trim data-noescape>
a = np.arange(1,4)

print(a)
<span data-fragment-index="1">print(3*a)</span>
<span class="fragment" data-fragment-index="2">print(a+a)</span>
<span class="fragment" data-fragment-index="3">print(a*a)</span>
<span class="fragment" data-fragment-index="4">print(a/a)</span>
<span class="fragment" data-fragment-index="5">print(np.cos(a))</span>
          </code></pre></span>
          <span class="twocols60"><pre><code class="python" data-trim data-noescape><div class="label">output</div>

[1 2 3]
<span class="fragment" data-fragment-index="1">[3 6 9]</span>
<span class="fragment" data-fragment-index="2">[2 4 6]</span>
<span class="fragment" data-fragment-index="3">[1 4 9]</span>
<span class="fragment" data-fragment-index="4">[1. 1. 1.]</span>
<span class="fragment" data-fragment-index="5">[ 0.54030231 -0.41614684 -0.9899925 ]</span></code></pre></span>
          <!--           <pre><code class="python" data-trim data-noescape> -->
          <!-- &gt;&gt;&gt; a = np.arange(1,4)  -->
          <!-- <span class="fragment">&gt;&gt;&gt; a -->
          <!-- array([1, 2, 3])</span> -->
          <!-- <span class="fragment">&gt;&gt;&gt; 3*a -->
          <!-- array([3, 6, 9])</span> -->
          <!-- <span class="fragment">&gt;&gt;&gt; a+a -->
          <!-- array([2, 4, 6])</span> -->
          <!-- <span class="fragment">&gt;&gt;&gt; a*a -->
          <!-- array([1, 4, 9])</span> -->
          <!-- <span class="fragment">&gt;&gt;&gt; a/a -->
          <!-- array([1, 1, 1])</span> -->
          <!-- <span class="fragment">&gt;&gt;&gt; np.cos(a) -->
          <!-- array([ 0.54030231, -0.41614684, -0.9899925 ])</span></code></pre> -->

          <p class="fragment" data-fragment-index="6">Note how they automatically apply element-wise. </p>

          <p class="fragment" data-fragment-index="7">What would happen if we did the same with normal lists?</p>

        </section>

        <section>
          <h3>numpy - random arrays</h3>

          <p>You can create arrays with random numbers</p>

          <div class="fragment">

            <div>Random floating point numbers between 0 and 1</div>
            <span class="twocols40"><pre><code class="python" data-trim>print(np.random.rand(3))</code></pre></span>
            <span class="twocols60"><pre><code class="python" data-trim data-noescape><div class="label">output</div>
[ 0.53066947  0.03155089  0.39243265]</code></pre></span>

          </div>

          <div class="fragment">

            <div>Random integers:</div>
            <span class="twocols70"><pre><code class="python" data-trim># 5 numbers between 1 and 3 (3 not included)
print(np.random.randint(1,3,5))</code></pre></span>
            <span class="twocols30"><pre><code class="python" data-trim data-noescape><div class="label">output</div>
[2 1 2 2 2]</code></pre></span>

          </div>
<!--          <div class="fragment">-->

<!--            <div>Different distributions:</div>-->
<!--            <span class="twocols50"><pre><code class="python" data-trim># normal distr: mean=0, stddev=1-->
<!--print(np.random.standard_normal(2))</code></pre></span>-->
<!--            <span class="twocols50"><pre><code class="python" data-trim data-noescape><div class="label">output</div>-->
<!--[ 1.70067518  0.63932443]</code></pre></span>-->

<!--          </div>-->
        </section>

        <section>
          <h3>numpy - multidimensional arrays</h3>

          <p>Common scenario: data set with multiple columns</p>

          <p class="fragment" >Numpy is ideal for handling such data - using 2D arrays.</p>

          <div class="fragment">

            <p>Initializing from a list of lists:</p>

            <span class="twocols60"><pre><code class="python" data-trim>print(np.array([[1,2,3,4],[5,6,7,8]]))
            </code></pre></span>
            <span class="twocols40"><pre><code class="python" data-trim data-noescape><div class="label">output</div>[[1 2 3 4]
 [5 6 7 8]]
            </code></pre></span>

          </div>

          <div class="fragment">
          A numpy array has a <code>shape</code> attribute, so you can see how many rows and columns it has
          <span class="twocols60"><pre><code class="python" data-trim>a = np.array([[1,2,3,4],[5,6,7,8]])
print(a.shape)
          </code></pre></span><span class="twocols40"><pre><code class="python" data-trim data-noescape><div class="label">output</div>
(2, 4)</code></pre></span>
          </div>
        </section>


        <section>
          <h3>numpy - Exercise 1</h3>

          <p>The previous slides provides us with a compact way to simulate throwing a die 100 times: <code>np.random.randint(1,7,100)</code></p>

            <p>Let's see if we can figure out how to calculate the sum of throwing 2 dice:</p>
          <ol>
            <li>Create a one-line python statement that calculates the average of 10,000 throws of the sum of two dice. <br/>Hint: <code>np.average()</code> calculates the average over an array.
          </ol>
        </section>

        <section class="solution">
          <h3>numpy - Exercise 1 - solution</h3>

          <ol>
            <li><i>Create a one-line python statement that calculates the average of 10,000 throws of the sum of two dice. <br/>Hint: <code>np.average()</code> calculates the average over an array</i>.
              <span class="fragment">
          <pre style="max-width:none;width:100%;"><code style="font-size:90%" class="python" data-trim>print(np.average(np.random.randint(1,7,10000) + np.random.randint(1,7,10000)))</code></pre>
          <pre style="max-width:none;width:100%;"><code style="font-size:90%" class="python" data-trim data-noescape><div class="label">output</div>7.0411000000000001</code></pre></span>
          </ol>
        </section>

        <section style="text-align:center">
          <h2>Pandas</h2>
        </section>

        <section>
          <h3>pandas - importing</h3>

          <pre><code class="python" data-trim>import pandas</code></pre>

          <div class="fragment"><p>or:</p>
            <pre><code class="python" data-trim>import pandas as pd</code></pre>
          </div>

        </section>

        <section>
          <h3>pandas</h3>

          <p>Pandas introduces a new datatype: the <em>dataframe</em></p>

          <p>What is a dataframe?</p>
          <ul>
            <li>A wrapper around a 2D numpy array - but with labels on the rows and columns</li>
            <li>Think of it as a replacement for Excel sheets. <span class="fragment">Or dataframes in R.</span> <span class="fragment">Or datasets in Sas.</span></li>
          </ul>
        </section>

<!--          -->
<!--          <p>What is pandas?</p>-->

<!--          <p>Short story: Python is a wrapper around Numpy, that makes it easy to work with tabular data.</p>-->

<!--          <p class="fragment">Think of it as a replacement for Excel sheets, R dataframes, or Sas datasets.</p>-->

<!--          <p class="fragment">Main difference from numpy: rows and columns have names.</p>-->
<!--        </section>-->

<!--        <section>-->
<!--          <h3>pandas - Dataframe</h3>-->

<!--          <ul>-->
<!--            <li>The main data type in pandas</li>-->
<!--            <li>A wrapper around a 2D numpy array - but with labels on the rows and columns</li>-->
<!--          </ul>-->




<!--        <section>-->
<!--          <h3>pandas: two data types</h3>-->

<!--          <p>Pandas is centered around two data types</p>-->
<!--          <dl>-->
<!--            <dt>Series</dt>-->
<!--            <dd>Like a 1D numpy array - but with labels</dd>-->
<!--            <dt>Dataframe</dt>-->
<!--            <dd>Like a 2D numpy array - but with labels. </dd>-->
<!--          </dl>-->

<!--        </section>-->

<!--        <section>-->
<!--          <h3>pandas - Series</h3>-->

<!--          <p>A <code>Series</code> is basically a numpy array with an <emph>index</emph> which defines labels for each entry</p>-->

<!--          <pre><code class="python" data-trim data-noescape>-->
<!--np_array = np.array([1.0, 2.0, 3.0])-->

<!--# convert numpy array to pandas series-->
<!--pd_series = pd.Series(np_array, index=['a', 'b', 'c'])-->

<!--print(pd_series)-->
<!--          </code></pre>-->
<!--          <pre><code class="python" data-trim data-noescape><div class="label">output</div>-->
<!--a    1.0-->
<!--b    2.0-->
<!--c    3.0-->
<!--dtype: float64-->
<!--          </code></pre>-->

<!--        </section>-->

<!--        <section>-->
<!--          <h3>pandas - Series - from a dict</h3>-->

<!--          <p>You can also create a Series from a dictionary</p>-->

<!--          <pre><code class="python" data-trim data-noescape>-->
<!--# Convert dictionary to pandas series-->
<!--pd_series = pd.Series({'a':1.0, 'b':2.0, 'c':3.0})-->
<!--print(pd_series)-->
<!--          </code></pre>-->

<!--          <pre><code class="python" data-trim data-noescape><div class="label">output</div>a    1.0-->
<!--b    2.0-->
<!--c    3.0-->
<!--dtype: float64-->
<!--          </code></pre>-->

<!--        </section>-->

<!--        <section style="font-size:90%">-->
<!--          <h3>pandas - Series - behave as arrays and dicts</h3>-->

<!--          <p><code>Series</code> behave similar to numpy arrays and dictionaries</p>-->

<!--          <pre><code class="python" data-trim data-noescape>-->
<!--# Just like numpy arrays, I can operate on all elements at once-->
<!--# ... but note how the labels stay aligned-->
<!--print(pd_series * 2)-->
<!--          </code></pre>-->
<!--          <pre><code class="python" data-trim data-noescape><div class="label">output</div>a    2.0-->
<!--b    4.0-->
<!--c    6.0-->
<!--dtype: float64-->
<!--          </code></pre>-->

<!--          <span class="fragment"><pre><code class="python" data-trim data-noescape>-->
<!--print(np.log(pd_series))   # I can also use functions from numpy-->
<!--          </code></pre>-->
<!--          <pre><code class="python" data-trim data-noescape><div class="label">output</div>a    0.000000-->
<!--b    0.693147-->
<!--c    1.098612-->
<!--dtype: float64-->
<!--          </code></pre></span>-->

<!--          <span class="fragment"><pre><code class="python" data-trim data-noescape>-->
<!--# Just like dicts, I can ask for a specific key-->
<!--print(pd_series['b'])-->
<!--          </code></pre>-->
<!--          <pre><code class="python" data-trim data-noescape><div class="label">output</div>2.0</code></pre>-->
<!--            </span>-->
<!--        </section>-->

<!--        <section style="font-size:90%">-->
<!--          <h3>pandas - Series - difference to numpy</h3>-->

<!--          <p>Labels are used for alignment</p>-->

<!--          <pre><code class="python" data-trim data-noescape>-->
<!--print(pd_series + pd_series[1:])-->
<!--          </code></pre>-->

<!--          <pre><code class="python" data-trim data-noescape><div class="label">output</div>a    NaN-->
<!--b    4.0-->
<!--c    6.0-->
<!--dtype: float64          </code></pre>-->

<!--          <p>Very powerful! - no worrying about adding pears to apples</p>-->

<!--          <span class="fragment">-->
<!--          <p>Note that all indices are retained - unless you explicitly drop them:</p>-->

<!--          <pre><code class="python" data-trim data-noescape>-->
<!--print((pd_series + pd_series[1:]).dropna())-->
<!--          </code></pre>-->

<!--          <pre><code class="python" data-trim data-noescape><div class="label">output</div>b    4.0-->
<!--c    6.0-->
<!--dtype: float64          </code></pre>-->
<!--          </span>-->
<!--        </section>-->

<!--        <section style="font-size:85%">-->
<!--          <h3>pandas - accessors</h3>-->

<!--          Pandas provides specific support for Series of certain types, through so-called Accessors.-->

<!--          <table>-->
<!--            <tr>-->
<!--              <th>Data type</th><th>Accessor</th>-->
<!--            </tr>-->
<!--            <tr><td>String</td><td>str</td></tr>-->
<!--            <tr><td>Categorical</td><td>cat</td></tr>-->
<!--            <tr><td>Datetime</td><td>dt</td></tr>-->
<!--            <tr><td>Sparse</td><td>sparse</td></tr>-->
<!--          </table>-->

<!--          For strings, this makes the usual methods available:-->

<!--          <div style="float:left; width:70%">-->
<!--          <pre><code class="python" data-trim data-noescape>-->
<!--pd_series = pd.Series({'a':'I', 'b':'love', 'c':'python'})-->
<!--print(pd_series.str.upper())-->
<!--          </code></pre>-->
<!--          </div>-->
<!--          <div style="float:left; width:30%">-->
<!--          <pre><code class="python" data-trim data-noescape><div class="label">output</div>a         I-->
<!--b      LOVE-->
<!--c    PYTHON-->
<!--dtype: object</code></pre>-->
<!--          </div>-->

<!--          <div style="clear:both"></div>-->

<!--          <span class="fragment">This only works for strings. You can convert elements in a series to strings using <code>.astype('string')</code></span>-->
<!--        </section>-->

<!--        <section style="font-size:90%">-->
<!--          <h3>pandas - Categorical</h3>-->

<!--          <p>In addition to the types known from numpy, pandas also has a categorical type</p>-->

<!--          <p>Can be created in different ways:</p>-->

<!--          <pre style="width:100%"><code class="python" data-noescape>series = pd.Series(['male', 'female', 'female'], dtype="category")-->
<!--series = pd.Series(['male', 'female', 'female']).astype('category')-->
<!--series = pd.Series(pd.Categorical(['male', 'female', 'female']))-->
<!--series = pd.Series(pd.Categorical(['male', 'female', 'female'],-->
<!--                                  categories=['female', 'male']))</code></pre>-->

<!--          Category specific functionality are accessible through <code>.cat</code>:-->

<!--          <pre style="width:100%"><code class="python" data-noescape>print(series.cat.categories)</code></pre>-->

<!--          <pre style="width:100%"><code class="nohighlight" data-noescape><div class="label">output</div>Index(['female', 'male'], dtype='object')</code></pre>-->
<!--        </section>-->

<!--        <section>-->
<!--          <h3>pandas - Series - Exercise</h3>-->

<!--          <ol>-->
<!--            <li>Use range to create a list with values from 0 to 99 and use it to initialize a Series, without providing an index. Print the series and see if you can make sense of the output. </li>-->
<!--            <li>Now do the same, but set the index to be from 100 to 199. </li>-->
<!--            <li>Convert the entries in the series to type string, and calculate the lengths of each of the entries</li>-->
<!--          </ol>-->

<!--        </section>-->

<!--        <section class="solution">-->
<!--          <h3>pandas - Series - Exercise - solution</h3>-->

<!--          <ol>-->
<!--            <li>Use range to create a list with values from 0 to 99 and use it to initialize a Series</li>-->
<!--            <pre><code class="python" data-trim data-noescape>-->
<!--series = pd.Series(range(100))-->
<!--print(series)  # A bit confusing, because index and values are the same-->
<!--          </code></pre>-->
<!--            <li>Now do the same, but let set the range to 5 to 104 instead.</li>-->
<!--            <pre><code class="python" data-trim data-noescape>-->
<!--series = pd.Series(range(100), index=range(100,200))-->
<!--print(series)  # Now, we can clearly see the difference-->
<!--          </code></pre>-->
<!--            <li>Convert the series to type string, and calculate the length of the entries</li>-->
<!--            <pre><code class="python" data-trim data-noescape>-->
<!--# Convert to string and calculate lengths-->
<!--series.astype('string').str.len()-->
<!--          </code></pre>-->
<!--          </ol>-->

<!--        </section>-->

<!--        <section style="text-align:center">-->
<!--          <h3>Pandas: Dataframes</h3>-->
<!--        </section>-->

        <section style="font-size:90%">
          <h3>pandas - Dataframe - from numpy array</h3>

          <p>A dataframe has two sets of labels</p>

          <p><span style="margin-left:3em; font-weight: bold">index: </span>row labels</p>
          <p><span style="margin-left:3em; font-weight: bold">columns: </span>column labels</p>

          <p>Dataframes can be created from numpy arrays by providing labels for the <code>index</code> and the <code>columns</code>:</p>
          <pre style="width:100%" ><code class="python" data-noescape>np_array = np.arange(6).reshape((2,3))
df = pd.DataFrame(np_array, index=['a', 'b'], columns=['col1', 'col2', 'col3'])
print(df)</code></pre>

          <pre style="width:100%" ><code class="nohighlight" data-noescape><div class="label">output</div>   col1  col2  col3
a     0     1     2
b     3     4     5       </code></pre>
        </section>

        <section style="font-size:90%">
          <h3>pandas - Dataframe - from dictionary of lists</h3>

          <p>You can also initialize from a dictionary of lists</p>
          <pre style="width:100%" ><code class="python" data-noescape>dict_of_lists = {'col1': [0,3], 'col2': [1,4], 'col3': [2,5]}
df = pd.DataFrame(dict_of_lists, index=['a', 'b'])
print(df)</code></pre>
          <pre style="width:100%" ><code class="nohighlight" data-noescape><div class="label">output</div>   col1  col2  col3
a     0     1     2
b     3     4     5       </code></pre>

          <span class="fragment">
          <p>If <code>index</code> is not specified, it will use [0,1, ...]</p>

          <pre style="width:100%" ><code class="python" data-noescape>df = pd.DataFrame(dict_of_lists)
print(df)</code></pre>
          <pre style="width:100%" ><code class="nohighlight" data-noescape><div class="label">output</div>   col1  col2  col3
0     0     1     2
1     3     4     5       </code></pre>
          </span>

          <p class="fragment">There are many more ways to initialize DataFrames...but we'll focus on reading from a file</p>

        </section>

        <section style="font-size:85%">
          <h3>pandas - reading/writing in various formats</h3>

          <p>Very useful: you can initialize a dataframe directly from a file!</p>

          <div class="fragment">
          <p>Various formats are supported</p>

          <table>
            <tr><td><code>read_table()</code></td><td></td></tr>
            <tr><td><code>read_csv()</code></td><td><code>to_csv()</code></td></tr>
            <tr><td><code>read_html()</code></td><td><code>to_html()</code></td></tr>
            <tr><td><code>read_json()</code></td><td><code>to_json()</code></td></tr>
            <tr><td><code>read_hdf()</code></td><td><code>to_hdf()</code></td></tr>
            <tr><td><code>read_excel()</code></td><td><code>to_excel()</code></td></tr>
            <tr><td><code>read_sas()</code></td><td></td></tr>
            <tr><td><code>read_sql()</code></td><td><code>to_sql()</code></td></tr>
            <tr><td>...</td></tr>
          </table>
          </div>

        </section>


        <section style="font-size:75%">
          <h3>Pandas &mdash; exercise</h3>

          We will work on the same file as last week: <a href="https://wouterboomsma.github.io/isb2024/data/amide.s2_exp">https://wouterboomsma.github.io/isb2024/data/amide.s2_exp</a>. Please download it - e.g. by writing the following in your notebook cell:

          <pre><code class="python">!wget https://wouterboomsma.github.io/isb2024/data/amide.s2_exp</code></pre>

          Pandas has lots of available functionality. Much to much to remember. So in this exercise we'll just try to look up some documentation online.

          <ol>
            <li>Look up the documentation for the <code>read_table</code> function in pandas (e.g. by googling "pandas read_table"), and use this function to read data from the amide.s2_exp into a pandas dataframe. Save the value in a variable called <code>df</code>.</li>
            <li>Now print the dataframe to screen. Make sure the header makes sense (hint: take a look at the "header" option)</li>
            <li>Now just evaluate the dataframe (i.e. just by writing <code>df</code> in a cell and pressing shift-enter.)</li>
          </ol>

        </section>

        <section class="solution"  style="font-size:70%">
          <h3>Files &mdash; exercise &mdash;  solution</h3>
          <ol>
            <li>...use this function to read data from the amide.s2_exp into a pandas dataframe. Save the variable in a variable called <code>df</code></li>
            <pre class="fragment"><code class="python" data-trim data-noescape>import pandas as pd
df = pd.read_table('amide.s2_exp', delimiter=' ')</code></pre>
            <li>Now print the dataframe to screen. Make sure the header makes sense (hint: take a look at the "header" option)</li>
            <span class="fragment">
            <span class="twocols70"><pre style="margin:0"><code class="python" data-trim>print(df)</code></pre></span>
            <span class="twocols30"><pre style="margin:0"><code class="python" data-trim data-noescape><div class="label">output</div>
     2 0.838 amide
0    3 0.884 amide
1    4 0.898 amide
..             ...</code></pre></span></span>
            <span class="fragment">
            <p>Ah ok...read_table thinks the first line is a header. Instead, we do</p>
            <span class="twocols70"><pre style="margin:0"><code class="python" data-trim data-noescape>df = pd.read_table('amide.s2_exp', delimiter=' ', header=None)
print(df)           </code></pre></span>
            <span class="twocols30"><pre style="margin:0"><code class="python" data-trim data-noescape><div class="label">output</div>
     0      1      2
0    2  0.838  amide
1    3  0.884  amide
..  ..    ...    ...
            </code></pre></span>
            </span>
            <span class="fragment">Note that it now uses 0,1,2,... for the index and columns names.</span>
          </ol>
        </section>

        <section class="solution"  style="font-size:70%">
          <h3>Files &mdash; exercise &mdash;  solution</h3>
          <ol start="2">
            <li>(continued)<br>
              We can also specify sensible headers instead:
              <span class="twocols70"><pre style="margin:0"><code class="python" data-trim data-noescape>df = pd.read_table('amide.s2_exp', delimiter=' ',
                   names=['residue', 'S2', 'type'])
print(df)           </code></pre></span>
              <span class="twocols30"><pre style="margin:0"><code class="python" data-trim data-noescape><div class="label">output</div>

    residue     S2   type
0         2  0.838  amide
1         3  0.884  amide
..      ...    ...    ...
            </code></pre></span><br>
              <span class="fragment">Note that this is the same functionality that we coded in pure python in the bonus question in the Preparation Exercise. In pandas, it just takes 1 line of code.</span>
            </li>
            <li>Now just evaluate the dataframe (i.e. just by writing <code>df</code> in a cell and pressing shift-enter.)<br>
              <img style="display:block; margin:0 auto" class="noborder center fragment" src="../images/notebook_df_output.png">
              <p class="fragment">Moral of the story: dataframes within notebooks are displayed more clearly when <em>evaluating</em> them rather than <em>printing</em> them.</p>
            </li>
          </ol>
        </section>
        <!--        <section>-->
<!--          <h3>pandas - Dataframe - from list of dictionaries</h3>-->

<!--          <p>You can also initialize from a lists of dictionaries</p>-->

<!--          <pre style="width:100%" ><code class="python" data-noescape>list_of_dicts = [{'col1': 0, 'col2': 1, 'col3': 2},-->
<!--                 {'col1': 3, 'col2': 4, 'col3': 5}]-->
<!--df = pd.DataFrame(list_of_dicts, index=['a', 'b'])-->
<!--print(df)</code></pre>-->
<!--          <pre style="width:100%" ><code class="nohighlight" data-noescape><div class="label">output</div>   col1  col2  col3-->
<!--a     0     1     2-->
<!--b     3     4     5       </code></pre>-->

<!--          <p class="fragment">There are many more ways to initialize DataFrames...</p>-->
<!--        </section>-->

        <section style="font-size:85%">
          <h3>pandas - Dataframe: index, columns, values</h3>

          <p>So what can we do with our dataframe once we've read it in?</p>

          <span class="fragment">
          <p>The labels and values can be accessed using <code>.index</code>, <code>.columns</code>, and <code>.values</code></p>

          <span style="float:left; width:52%"><pre><code class="python" data-noescape>np_array = np.arange(6).reshape((3,2))
df = pd.DataFrame(np_array,
                  index=['a', 'b', 'c'],
                  columns=['col1', 'col2'])
print(df.index)
print(df.columns)
print(df.values)
          </code></pre></span>
          <span style="float:left; width:47%"><pre><code class="nohighlight" data-noescape><div class="label">output</div>



Index(['a', 'b', 'c'], dtype='object')
Index(['col1', 'col2'], dtype='object')
[[0 1]
 [2 3]
 [4 5]]          </code></pre></span>
          </span>
        </section>

        <section  style="font-size:85%">
          <h2>pandas - Indexing into a dataframe</h2>

          <p>More importantly, we want to be able to access values in our dataframe. How?</p>

          <p>There are (confusingly) many ways to do this - we'll focus on one here:</p>

          <span class="fragment">
<!--          <p style="margin-top:1em;">General - also supports slicing, etc (see later slide):</p>-->
          <table>
            <tr><td>Get by label:</td><td><code style="font-size:75%">df.loc[row_label, col_label]</code></td></tr>
            <!--<tr><td style="font-weight:normal">Get by label range:</td><td><code style="font-size:75%">df.loc[row_s:row_e, col_s:col_e]</code></td></tr>-->
            <!--<tr><td style="font-weight:normal">Get by label list:</td><td><code style="font-size:75%">df.loc[row_list, col_list]</code></td></tr>-->
            <!--<tr><td style="font-weight:normal">Get by boolean list:</td><td><code style="font-size:75%">df.loc[row_bool_list]</code></td></tr>-->
            <tr><td>Get by index:</td><td><code style="font-size:75%">df.iloc[row_index, col_index]</code></td></tr>
          </table>

<!--          <span class="fragment">-->
<!--          <p style="margin-top:1em;">Faster - for lookup of single values:</p>-->
<!--          <table>-->
<!--            <tr><td>Get by label:</td><td><code style="font-size:80%">df.at[row_label, col_label]</code></td></tr>-->
<!--            <tr><td>Get by index:</td><td><code style="font-size:80%">df.iat[row_index, col_index]</code></td></tr>-->
<!--          </table>-->
<!--          </span>-->
            </span>
        </section>

<!--        <section>-->
<!--          <h3>pandas - Other ways to index into a dataframe</h3>-->

<!--          <p>Indexing directly into a dataframe:</p>-->

<!--          <table>-->
<!--            <tr><td>Get column by label:</td><td><code style="font-size:80%">df[col_label]</code></td><td>&rarr;Series</td></tr>-->
<!--            <tr><td>Slice rows by index range:</td><td><code style="font-size:80%">df[start:end]</code></td><td>&rarr;DataFrame</td></tr>-->
<!--            &lt;!&ndash;            <tr><td>Filter by boolean list/array</td><td><code style="font-size:80%">df[bool_list]</code></td><td>&rarr;DataFrame</td></tr>&ndash;&gt;-->
<!--          </table>-->

<!--          <p>This can be a bit confusing - better to stick with <code>loc</code>, <code>iloc</code>, <code>at</code>, <code>iat</code></p>-->

<!--        </section>-->

        <section style="font-size:95%">
          <h3>pandas - <code>.loc</code>: selecting by labels</h3>

          <p>The <code>.loc</code> attribute is the primary access method</p>

          <ul>
            <li>It selects <strong>by label!</strong></p></li>
            <li>Ranges are allowed: all labels between <strong>and including</strong> both endpoints are included</li>
          </ul>

          <span class="twocols70"><pre><code class="python" data-noescape>np_array = np.arange(6).reshape((3,2))
df = pd.DataFrame(np_array, index=['a', 'b', 'c'],
                  columns=['col1', 'col2'])
print(df)



# note that both endpoints are included
print(df.loc['a':'b'])</code></pre></span>
          <span class="twocols30"><pre><code class="nohighlight" data-noescape><div class="label">output</div>


   col1  col2
a     0     1
b     2     3
c     4     5

   col1  col2
a     0     1
b     2     3        </code></pre></span>
        </section>

        <section style="font-size:95%">
          <h3>pandas - <code>.loc</code>: selecting by labels (2)</h3>

          <p>You can select along both rows and columns with <code>.loc</code></p>

          <span class="twocols70"><pre><code class="python" data-noescape>np_array = np.arange(6).reshape((3,2))
df = pd.DataFrame(np_array, index=['a', 'b', 'c'],
                  columns=['col1', 'col2'])
print(df)




print(df.loc['a':'b', :'col1'])</code></pre></span>
          <span class="twocols30"><pre><code class="nohighlight" data-noescape><div class="label">output</div>


   col1  col2
a     0     1
b     2     3
c     4     5

   col1
a     0
b     2        </code></pre></span>

<!--          <p class="fragment">Q: What would happen if I removed the ':' before 'col1'?</p>-->
<!--          <p class="fragment">A: It returns a series</p>-->
        </section>

<!--        <section style="font-size:90%">-->
<!--          <h3>pandas dataframes: selecting with a boolean array (1)</h3>-->

<!--          <span class="twocols60"><pre><code class="python" data-noescape>np_array = np.arange(6).reshape((3,2))-->
<!--df = pd.DataFrame(np_array,-->
<!--                  index=['a', 'b', 'c'],-->
<!--                  columns=['col1','col2'])-->
<!--print(df)-->

<!--# A boolean array is sometimes-->
<!--# called a mask-->
<!--mask = (df > 2)-->
<!--print(mask)-->

<!--# You can index with a mask-->
<!--# to operate on the entries of-->
<!--# interest - e.g. assign to them-->
<!--df[mask] = 0-->

<!--print(df)          </code></pre></span>-->

<!--          <span class="twocols40"><pre><code class="nohighlight" style="max-height:none" data-noescape><div class="label">output</div>-->



<!--   col1  col2-->
<!--a     0     1-->
<!--b     2     3-->
<!--c     4     5-->

<!--    col1   col2-->
<!--a  False  False-->
<!--b  False   True-->
<!--c   True   True-->


<!--   col1  col2-->
<!--a     0     1-->
<!--b     2     0-->
<!--c     0     0-->
<!--          </code></pre></span>-->
<!--        </section>-->

<!--        <section style="font-size:90%">-->
<!--          <h3>pandas dataframes: selecting with a boolean array (2)</h3>-->

<!--          We can also create a mask for the rows or columns-->

<!--          <span class="twocols60"><pre><code class="python" data-noescape>np_array = np.arange(6).reshape((3,2))-->
<!--df = pd.DataFrame(np_array,-->
<!--                  index=['a', 'b', 'c'],-->
<!--                  columns=['col1','col2'])-->
<!--print(df)-->

<!--# Check which rows in the first col-->
<!--# have a value larger than 2-->
<!--row_mask = df[:,0] > 2-->

<!--print(row_mask)-->


<!--# Now, select only those rows for-->
<!--# which the mask is true-->
<!--new_df = df.loc[row_mask,:]-->
<!--print(new_df)-->
<!--          </code></pre></span>-->
<!--          <span class="twocols40"><pre><code class="nohighlight" style="max-height:none" data-noescape><div class="label">output</div>-->



<!--   col1  col2-->
<!--a     0     1-->
<!--b     2     3-->
<!--c     4     5-->


<!--a    False-->
<!--b    False-->
<!--c     True-->
<!--Name: col1, dtype: bool-->


<!--   col1  col2-->
<!--c     4     5-->
<!--</code></pre></span>-->
<!--        </section>-->

        <section style="font-size:90%">
          <h3>pandas - Exercise 2</h3>

          <p>Continuing on the same dataset as before...</p>

          <ol>
            <li>Extract and output the second ('S2') column from our amide.s2_exp dataframe</li>
          </ol>
        </section>


        <section class="solution" style="font-size:85%">
          <h3>pandas - Exercise 2 - solution</h3>

          <ol start="2">
            <li>Extract and output the first column from our amide.s2_exp dataframe<br>
              <span class="twocols70"><pre style="margin:0"><code class="python" data-trim data-noescape>import pandas as pd
df = pd.read_table('amide.s2_exp', delimiter=' ',
                   names=['residue', 'S2', 'type'])
print(df.loc[:,'S2'])           </code></pre></span>
              <span class="twocols30"><pre style="margin:0"><code class="python" data-trim data-noescape><div class="label">output</div>


0     0.838
1     0.884
2     0.898
      ...  </code></pre></span>
              Note that we still carry around the index on the left. If we want to get rid of that, we can use <code>.values</code> to get the raw numpy array:<br>
              <span class="twocols60"><pre style="margin:0"><code class="python" data-trim data-noescape>print(df.loc[:,'S2'].values)           </code></pre></span>
              <span class="twocols40"><pre style="margin:0"><code class="python" data-trim data-noescape><div class="label">output</div>
[0.838 0.884 0.898 ... ]
</code></pre></span>

            </li>
          </ol>

        </section>

        <section style="text-align:center">
          <h2>Matplotlib</h2>
        </section>

        <section>
          <h3>matplotlib</h3>

          <p>Very powerful, general purpose plotting functionality</p>

          <p class="fragment">There are thousands of things you can do with it. We'll just show a few examples here...</p>

        </section>

        <section>
          <h3>matplotlib - importing</h3>

          <p>The standard way to import matplotlib:</p>

          <pre><code class="python" data-trim>import matplotlib.pyplot as plt</code></pre>

        </section>

        <section data-background-color="#EEEEEE">
          <h3>matplotlib - simple plot</h3>

          <div style="float:left; width:50%;">
            <pre><code class="python" data-trim>import matplotlib.pyplot as plt
import numpy as np
x = np.arange(0, 10, 0.1)
y = np.cos(x)
plt.plot(x,y)
plt.show()</code></pre>
          </div>
          <div style="float:left; width:50%;">
            <img style="display:block;margin-left:auto; margin-right:auto;border:0px;" src="../images/matplotlib_plot1.png"/>
          </div>

          <p class="fragment">Try it out!</p>
        </section>

        <section data-background-color="#EEEEEE">
          <h3>matplotlib - saving to a file</h3>

          <div style="float:left; width:50%;">
            <pre><code class="python" data-trim>import matplotlib.pyplot as plt
import numpy as np
x = np.arange(0, 10, 0.1)
y = np.cos(x)
plt.plot(x,y)
plt.savefig('plot.png',
            transparent=True)
            </code></pre>
          </div>
          <div style="float:left; width:50%;">
            <img style="display:block;margin-left:auto; margin-right:auto;border:0px; box-shadow:none;background:transparent" src="../images/matplotlib_plot_transparent.png"/>
          </div>
          <p class="fragment">Note that you can use <code>transparent=True</code> for transparent backgrounds.</p>
        </section>

        <section>
          <h3>matplotlib - multiple plots</h3>

          <div style="float:left; width:50%;">
            <pre><code class="python" data-trim>import matplotlib.pyplot as plt
import numpy as np

x = np.arange(0, 10, 0.1)

y1 = np.cos(x)
plt.plot(x,y1)

y2 = np.sin(x)
plt.plot(x,y2)

plt.show()</code></pre>
          </div>
          <div style="float:left; width:50%;">
            <img style="display:block;margin-left:auto; margin-right:auto;border:0px;background:transparent" src="../images/matplotlib_plot2.png"/>
          </div>

        </section>

        <section>
          <h3>matplotlib - legends</h3>

          <div style="float:left; width:50%;">
            <pre><code class="python" data-trim>import matplotlib.pyplot as plt
import numpy as np

x = np.arange(0, 10, 0.1)

y1 = np.cos(x)
plt.plot(x,y1, label='cosine')

y2 = np.sin(x)
plt.plot(x,y2, label='sine')

plt.legend()

plt.show()</code></pre>
          </div>
          <div style="float:left; width:50%;">
            <img style="display:block;margin-left:auto; margin-right:auto;border:0px;background:transparent" src="../images/matplotlib_plot2_legends.png"/>
          </div>

          <div style="clear:both;"/>

          <p class="fragment">Note that the <code>legend()</code> automatically reads the labels from the individual plot commands.</p>

        </section>

        <section>
          <h3>matplotlib - histograms</h3>

          <div style="float:left; width:50%;">
            <pre><code class="python" data-trim>import matplotlib.pyplot as plt
import numpy as np

x = np.random.standard_normal(10000)
plt.hist(x, bins=100)

plt.show()
            </code></pre>
          </div>
          <div style="float:left; width:50%;">
            <img style="display:block;margin-left:auto; margin-right:auto;border:0px;background:transparent" src="../images/matplotlib_hist.png"/>
          </div>

        </section>


        <section>
          <h3>matplotlib - scatter plot</h3>

          <div style="float:left; width:50%;">
            <pre><code class="python" data-trim>import matplotlib.pyplot as plt
import numpy as np

# 2D-Gauss distribution
x = np.random.multivariate_normal(
      mean=(1,2),
      cov=[[1,-0.5],[-0.5,1]],
      size=1000)
plt.scatter(x[:,0],x[:,1])

plt.show()
            </code></pre>
          </div>
          <div style="float:left; width:50%;">
            <img style="display:block;margin-left:auto; margin-right:auto;border:0px;" src="../images/matplotlib_scatter.png"/>
          </div>

        </section>


        <section>
          <h3>matplotlib - Exercise 1</h3>

          <p>We can now plot the S2 data from our running example.</p>

          <ol>
            <li>Extract the <code>'residue'</code> column and the <code>'S2'</code> colomn from the dataframe, and use this to create a line plot, where the residues are the x-values and the S2 values are the y-values.</li>
          </ol>
        </section>

        <section class="solution" style="font-size:85%">
          <h3>matplotlib - Exercise 1 - solution (1)</h3>

          <div style="float:left; width:55%;">
            <pre><code class="python" data-trim>import pandas as pd
import matplotlib.pyplot as plt

df = pd.read_table('amide.s2_exp',
                   delimiter=' ',
                   names=['residue', 'S2',
                          'type'])

plt.plot(df.loc[:,'residue'], df.loc[:,'S2'])
plt.show()
            </code></pre>
          </div>
          <div style="float:left; width:45%;">
            <img style="width:100%; display:block;margin-left:auto; margin-right:auto;border:0px; margin-top:-0.5em" src="../images/s2_lineplot.svg"/>
          </div>

        </section>

        <section class="solution" style="font-size:85%">
          <h3>matplotlib - Exercise 1 - solution (2)</h3>

          You can actually also call this same plot functionality directly on the pandas dataframe<br>

          <div style="float:left; width:55%;">
            <pre><code class="python" data-trim>import pandas as pd
import matplotlib.pyplot as plt

df = pd.read_table('amide.s2_exp',
                   delimiter=' ',
                   names=['residue', 'S2',
                          'type'])

df.plot('residue', 'S2')   # <--
plt.show()
            </code></pre>
          </div>
          <div style="float:left; width:45%;">
            <img style="width:100%; display:block;margin-left:auto; margin-right:auto;border:0px; margin-top:-0.5em" src="../images/s2_lineplot2.svg"/>
          </div>

          <p class="fragment">Note that the code is now simpler - and we get axis labels for free</p>

        </section>

      </div>
    </div>

    <script src="../hide_before_week_day_time.js"></script>
    <script>
       var hideSolutions = true;
       if(hideSolutions)
           hideBeforeWeekDayTime(document, 7, 'tue', 12)
    </script>

    <script src="../reveal.js-4.3.1/dist/reveal.js"></script>
    <script src="../reveal.js-4.3.1/plugin/zoom/zoom.js"></script>
    <script src="../reveal.js-4.3.1/plugin/notes/notes.js"></script>
    <script src="../reveal.js-4.3.1/plugin/search/search.js"></script>
    <script src="../reveal.js-4.3.1/plugin/markdown/markdown.js"></script>
    <script src="../reveal.js-4.3.1/plugin/highlight/highlight.js"></script>
    <script src="../reveal.js-4.3.1/plugin/math/math.js"></script>

    <script>

       // Full list of configuration options available here:
       // https://github.com/hakimel/reveal.js#configuration
       Reveal.initialize({
          controls: true,
          progress: true,
          history: true,
          center: true,
          transitionSpeed: 'fast',
          touch: true,
          keyboard: true,

          slideNumber: true,

          minScale: 0.1,
          maxScale: 5.0,

          transition: 'linear', // default/cube/page/concave/zoom/linear/fade/none

          plugins: [ RevealZoom, RevealNotes, RevealSearch, RevealMarkdown, RevealHighlight, RevealMath ]
       });

    </script>

  </body>
</html>
